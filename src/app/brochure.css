/* Styles specifically for the BrochurePreview component */
.brochure-preview-container {
  @apply bg-gray-200 p-4 md:p-8 print:p-0 print:bg-transparent overflow-y-auto;
  max-height: 100vh; /* Ensure preview area is scrollable */
}

.printable-brochure {
  @apply bg-white shadow-lg mx-auto print:shadow-none;
  background-color: hsl(var(--background)); /* Use theme background */
  width: 210mm; /* A4 width */
  padding: 0 !important;
  margin: 0 auto !important; /* Center in preview */
}

.page {
  @apply relative overflow-hidden; /* Default page background, can be overridden */
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
  width: 210mm;
  min-height: 297mm;
  height: auto;
  font-family: 'Georgia', serif;
  line-height: 1.4;
  box-shadow: 0 0 10px hsla(var(--foreground-h), var(--foreground-s), var(--foreground-l), 0.1); /* Shadow for non-print */
  margin-bottom: 20px;
  print-color-adjust: exact;
  -webkit-print-color-adjust: exact;
  page-break-inside: avoid !important;
}

@media print {
  .page {
    box-shadow: none !important;
    margin: 0 !important;
    padding: 0 !important;
    width: 210mm !important;
    min-height: 297mm !important;
    height: auto !important;
    overflow: visible !important;
    page-break-inside: avoid !important;
    position: relative !important;
    /* Background and color will be set by page-light-bg or page-accent-bg */
    print-color-adjust: exact !important;
   -webkit-print-color-adjust: exact !important;
  }
   .page:not(:last-child) {
       page-break-after: always !important;
   }
}

.page-content {
  @apply relative h-auto;
  padding: 15mm;
  box-sizing: border-box;
  min-height: calc(297mm - 30mm);
  print-color-adjust: exact;
  -webkit-print-color-adjust: exact;
  overflow: visible !important;
}

/* Base Backgrounds using Theme Variables */
.page-light-bg { background-color: hsl(var(--background)); color: hsl(var(--foreground)); }
.page-accent-bg { background-color: hsl(var(--primary)); color: hsl(var(--primary-foreground)); }

/* Typography - Reduced margins/sizes for print fit */
h1 { font-size: 36px; line-height: 1.2; margin-bottom: 10mm; font-weight: bold; letter-spacing: -0.4pt; }
h2 { font-size: 26px; line-height: 1.2; margin-bottom: 8mm; font-weight: bold; letter-spacing: -0.2pt; }
h3 { font-size: 20px; line-height: 1.2; margin-bottom: 5mm; font-weight: bold; letter-spacing: -0.1pt; }
h4 { font-size: 16px; line-height: 1.2; margin-bottom: 3mm; font-weight: bold; }
p { font-size: 13px; line-height: 1.5; margin-bottom: 3mm; }
ul { list-style: none; padding-left: 0; margin-bottom: 5mm; }
li { margin-bottom: 2mm; font-size: 13px; position: relative; padding-left: 7mm; break-inside: avoid; }
li::before { content: '•'; color: hsl(var(--primary)); position: absolute; left: 0; top: 0.1em; font-size: 16px; line-height: 1; }

.page-accent-bg li::before { color: hsl(var(--primary-foreground)); }
.page-accent-bg h1, .page-accent-bg h2, .page-accent-bg h3, .page-accent-bg h4, .page-accent-bg p { color: hsl(var(--primary-foreground)); }


/* Section Title using Theme Variables */
.section-title {
    font-size: 28px;
    font-weight: bold;
    margin-bottom: 10mm;
    color: hsl(var(--primary));
    text-align: center;
    position: relative;
    padding-bottom: 4mm;
    page-break-after: avoid !important;
}
.section-title::after {
    content: ""; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);
    width: 25mm; height: 1mm; background-color: hsl(var(--primary));
}
.page-accent-bg .section-title { color: hsl(var(--primary-foreground)); }
.page-accent-bg .section-title::after { background-color: hsl(var(--primary-foreground)); }

/* Cover Page Specific using Theme Variables */
.cover-page { background-color: hsl(var(--primary)); color: hsl(var(--primary-foreground)); text-align: center; display: flex; flex-direction: column; justify-content: center; align-items: center; }
.cover-image { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0.5; object-fit: cover; z-index: 1; overflow: hidden;}
.cover-content { position: relative; z-index: 2; padding: 20mm; margin-top: -50mm; }
.project-logo { width: 70mm; margin: 0 auto 15mm; display: block; }
.project-name { font-size: 44px; text-transform: uppercase; margin-bottom: 8mm; }
.project-tagline { font-size: 19px; font-style: italic; margin-bottom: 15mm; }
.rera-text {
  position: absolute;
  top: 15mm;
  right: 15mm;
  font-size: 9px;
  text-align: right;
  background-color: hsla(var(--foreground-h), var(--foreground-s), var(--foreground-l), 0.3); /* Using theme foreground with alpha */
  color: hsl(var(--primary-foreground)); /* Ensure text is readable on dark overlay */
  padding: 2mm 3mm;
  border-radius: 2mm;
  z-index: 3;
}
.rera-text p { margin-bottom: 0; line-height: 1.2; }

/* Intro Page */
.intro-text { max-width: 150mm; margin: 0 auto; text-align: center; font-size: 14px; line-height: 1.7; }
.watermark { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 50mm; opacity: 0.08; z-index: 0; print-opacity: 0.05; }
.page-accent-bg .watermark { filter: brightness(0) invert(1); opacity: 0.12; print-opacity: 0.08; }

/* Developer Page */
.developer-page { position: relative; }
.developer-image { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; opacity: 0.7; z-index: 1; overflow: hidden;}
.developer-content { position: relative; z-index: 2; max-width: 120mm; background-color: hsla(var(--foreground-h), var(--foreground-s), var(--foreground-l), 0.65); padding: 8mm; color: hsl(var(--primary-foreground)); border-radius: 2mm; margin: 90mm auto 0; }
.developer-content h2 { margin-bottom: 4mm; font-size: 22px; }
.developer-content p { margin-bottom: 3mm; font-size: 13px; }
.developer-logo { width: 50mm; margin: 8mm auto 0; display: block; }
.disclaimer { position: absolute; bottom: 15mm; right: 15mm; font-size: 9px; color: hsl(var(--primary-foreground)); background-color: hsla(var(--foreground-h), var(--foreground-s), var(--foreground-l), 0.5); padding: 1.5mm 2.5mm; border-radius: 1mm; z-index: 3; max-width: 80mm; text-align: right; }
.disclaimer p { margin-bottom: 0; }

/* Location Page */
.location-container { display: flex; flex-direction: column; gap: 8mm; }
.location-text h3 { margin-top: 8mm; margin-bottom: 4mm; font-size: 18px; color: hsl(var(--primary));}
.location-map { position: relative; min-height: 90mm; margin-top: 8mm; overflow: hidden;}
.location-map img { width: 100%; height: auto; max-height: 110mm; object-fit: contain; border-radius: 2mm; border: 1px solid hsl(var(--border)); }
.map-disclaimer { position: absolute; bottom: 3mm; right: 3mm; font-size: 8px; color: hsl(var(--primary-foreground)); background-color: hsla(var(--foreground-h), var(--foreground-s), var(--foreground-l), 0.5); padding: 1.5mm 2mm; border-radius: 1mm; z-index: 3; }
.map-disclaimer p { margin-bottom: 0; }
.list-columns { column-count: 2; column-gap: 8mm; margin: 8mm 0; }
.list-columns ul { margin-bottom: 6mm; }
.location-note { font-size: 9px; font-style: italic; margin-top: 4mm; text-align: center; color: hsl(var(--muted-foreground));}

/* Connectivity Page */
.connectivity-container { display: flex; flex-direction: column; gap: 8mm; }
.connectivity-text h3 { margin-bottom: 4mm; margin-top: 0; font-size: 18px; color: hsl(var(--primary));}
.connectivity-image { position: relative; min-height: 90mm; margin-top: 8mm; overflow: hidden;}
.connectivity-image img { width: 100%; height: auto; max-height: 110mm; object-fit: cover; border-radius: 2mm; }
.district-label { position: absolute; bottom: 8mm; left: 50%; transform: translateX(-50%); background-color: hsl(var(--background)); color: hsl(var(--primary)); padding: 2mm 6mm; font-weight: bold; font-size: 14px; text-transform: uppercase; border-radius: 1mm; z-index: 3; }
.connectivity-point-list { break-inside: avoid; margin-bottom: 5mm; }
.connectivity-point-list h4 { margin-bottom: 2mm; font-size: 16px; color: hsl(var(--foreground));}
.connectivity-point-list ul { margin: 0; }
.connectivity-point-list li::before { content: '•'; color: hsl(var(--primary)); position: absolute; left: 0; top: 0.1em; font-size: 16px; line-height: 1; }

/* Amenities Intro Page */
.amenities-intro { max-width: 150mm; margin: 0 auto; text-align: center; font-size: 14px; line-height: 1.7; }

/* Amenities List Page */
.amenities-container { display: flex; flex-direction: column; gap: 8mm; }
.amenities-image { position: relative; min-height: 90mm; margin-top: 8mm; overflow: hidden;}
.amenities-image img { width: 100%; height: auto; max-height: 100mm; object-fit: cover; border-radius: 2mm; }
.amenities-image .image-disclaimer { position: absolute; bottom: 3mm; right: 3mm; font-size: 8px; color: hsl(var(--primary-foreground)); background-color: hsla(var(--foreground-h), var(--foreground-s), var(--foreground-l), 0.5); padding: 1.5mm 2mm; border-radius: 1mm; z-index: 3; }
.amenities-list h3 { color: hsl(var(--primary)); border-bottom: 1px solid hsl(var(--border)); padding-bottom: 2mm; margin-top: 8mm; margin-bottom: 4mm; font-size: 18px; }
.amenities-list ul { column-count: 2; column-gap: 8mm; }

/* Amenities Grid Page */
.amenities-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8mm; margin-bottom: 8mm; margin-top: 8mm; }
.grid-item { position: relative; border-radius: 2mm; overflow: hidden; aspect-ratio: 4 / 3; }
.grid-item img { width: 100%; height: 100%; object-fit: cover; }
.grid-label { position: absolute; bottom: 4mm; left: 50%; transform: translateX(-50%); background-color: hsla(var(--background-h), var(--background-s), var(--background-l), 0.9); color: hsl(var(--primary)); padding: 1.5mm 4mm; font-weight: bold; font-size: 12px; text-transform: uppercase; border-radius: 1mm; z-index: 3; }
.grid-disclaimer { font-size: 9px; font-style: italic; text-align: center; margin-top: 8mm; color: hsl(var(--muted-foreground));}

/* Specifications Page */
.specs-container { display: flex; flex-direction: column; gap: 8mm; }
.specs-image { position: relative; min-height: 90mm; margin-top: 8mm; overflow: hidden;}
.specs-image img { width: 100%; height: auto; max-height: 100mm; object-fit: cover; border-radius: 2mm; }
.specs-image .image-disclaimer { position: absolute; bottom: 3mm; right: 3mm; font-size: 8px; color: hsl(var(--primary-foreground)); background-color: hsla(var(--foreground-h), var(--foreground-s), var(--foreground-l), 0.5); padding: 1.5mm 2mm; border-radius: 1mm; z-index: 3; }
.specs-list h3 { color: hsl(var(--primary)); border-bottom: 1px solid hsl(var(--border)); padding-bottom: 2mm; margin-bottom: 4mm; margin-top: 8mm; font-size: 18px; }
.specs-list ul { column-count: 2; column-gap: 8mm; }

/* Master Plan Page */
.master-plan-image { width: 100%; margin-bottom: 8mm; position: relative; margin-top: 8mm; overflow: hidden;}
.master-plan-image img { width: 100%; height: auto; object-fit: contain; border-radius: 2mm; border: 1px solid hsl(var(--border)); max-height: 160mm; }
.master-plan-image .image-disclaimer { position: absolute; bottom: 3mm; right: 3mm; font-size: 8px; color: hsl(var(--foreground)); background-color: hsla(var(--background-h), var(--background-s), var(--background-l), 0.7); padding: 1.5mm 2mm; border-radius: 1mm; z-index: 3; }
.master-plan-text { margin-bottom: 8mm; font-size: 13px; }

/* Floor Plans Page */
.floor-plans-container { display: flex; flex-direction: column; gap: 10mm; margin-top: 8mm; }
.floor-plan { display: flex; flex-direction: row; gap: 8mm; page-break-inside: avoid !important; align-items: flex-start; }
.plan-image { flex: 0 0 80mm; position: relative; max-height: 100mm; overflow: hidden;}
.plan-image img { width: 100%; height: auto; object-fit: contain; border: 1px solid hsl(var(--border)); border-radius: 2mm; max-height: 100mm; }
.plan-details { flex: 1; }
.plan-details h4 { color: hsl(var(--primary)); margin-bottom: 3mm; margin-top: 0; font-size: 16px; }
.plan-details p { margin-bottom: 2mm; font-size: 13px; }
.plan-details ul { margin-top: 3mm; }
.plan-details li { margin-bottom: 1.5mm; font-size: 12px; padding-left: 6mm; }
.plan-details li::before { content: '•'; color: hsl(var(--primary)); position: absolute; left: 0; top: 0.1em; font-size: 14px; line-height: 1; }
.plans-disclaimer { font-size: 9px; font-style: italic; margin-top: 8mm; text-align: center; color: hsl(var(--muted-foreground));}

/* Back Cover */
.back-cover { background-color: hsl(var(--primary)); color: hsl(var(--primary-foreground)); text-align: center; display: flex; flex-direction: column; justify-content: space-between; align-items: center; }
.back-cover-image { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0.25; object-fit: cover; z-index: 1; overflow: hidden;}
.back-cover-content { position: relative; z-index: 2; padding-top: 40mm; flex-grow: 1; width: 100%; }
.back-logo { width: 90mm; margin: 0 auto 15mm; display: block; }
.call-to-action { font-size: 26px; text-transform: uppercase; margin-bottom: 15mm; letter-spacing: 0.8pt; }
.contact-info { margin-bottom: 15mm; }
.contact-info h3 { display: inline-block; border-bottom: 1px solid hsla(var(--primary-foreground-h, 0), var(--primary-foreground-s, 0%), var(--primary-foreground-l, 98%), 0.3); padding-bottom: 2mm; margin-bottom: 8mm; font-size: 20px; } /* Assuming primary-foreground is light */
.contact-info p { margin-bottom: 2.5mm; font-size: 13px; }
.contact-info a { color: hsl(var(--primary-foreground)); text-decoration: underline; }
.full-disclaimer { position: relative; z-index: 2; bottom: auto; left: auto; right: auto; margin: 0 15mm 15mm; font-size: 9px; text-align: justify; background-color: hsla(var(--foreground-h), var(--foreground-s), var(--foreground-l), 0.25); color: hsl(var(--primary-foreground)); padding: 4mm; border-radius: 2mm; }
.full-disclaimer p { margin-bottom: 1mm; line-height: 1.3; }

/* General Helpers */
img { display: block; max-width: 100%; height: auto; page-break-inside: avoid !important; }
.object-cover { object-fit: cover; }
.object-contain { object-fit: contain; }

li::before {
  line-height: 1; top: 0.1em;
}

h1, h2, h3, h4, h5, h6, .section-title {
  page-break-after: avoid !important;
}
p, ul, ol, div:not(.page):not(.page-content), img, figure, table, thead, tbody {
    page-break-inside: avoid !important;
}
p, li { orphans: 3; widows: 3; }
ul, ol { page-break-before: auto; page-break-after: auto; }

img[data-ai-hint] { }

/* Force print colors using theme variables */
@media print {
  *, *::before, *::after {
      print-color-adjust: exact !important;
      -webkit-print-color-adjust: exact !important;
       box-shadow: none !important;
       text-shadow: none !important;
  }
  .page-accent-bg, .cover-page, .back-cover {
    background-color: hsl(var(--primary)) !important;
    color: hsl(var(--primary-foreground)) !important;
  }
  .page-light-bg {
    background-color: hsl(var(--background)) !important;
    color: hsl(var(--foreground)) !important;
  }
   .developer-content {
      background-color: hsla(var(--foreground-h), var(--foreground-s), var(--foreground-l), 0.65) !important;
      color: hsl(var(--primary-foreground)) !important;
   }
  .disclaimer, .map-disclaimer, .amenities-image .image-disclaimer, .specs-image .image-disclaimer {
      background-color: hsla(var(--foreground-h), var(--foreground-s), var(--foreground-l), 0.5) !important;
      color: hsl(var(--primary-foreground)) !important;
  }
  .master-plan-image .image-disclaimer {
      background-color: hsla(var(--background-h), var(--background-s), var(--background-l), 0.7) !important;
      color: hsl(var(--foreground)) !important;
  }
  .back-cover .full-disclaimer {
      background-color: hsla(var(--foreground-h), var(--foreground-s), var(--foreground-l), 0.25) !important;
      color: hsl(var(--primary-foreground)) !important;
  }
   .district-label {
       background-color: hsl(var(--background)) !important;
       color: hsl(var(--primary)) !important;
   }
   .grid-label {
       background-color: hsla(var(--background-h), var(--background-s), var(--background-l), 0.9) !important;
       color: hsl(var(--primary)) !important;
   }
    .rera-text {
        background-color: hsla(var(--foreground-h), var(--foreground-s), var(--foreground-l), 0.3) !important;
        color: hsl(var(--primary-foreground)) !important;
    }

    .watermark { opacity: 0.05 !important; }
    .page-accent-bg .watermark { filter: brightness(0) invert(1) !important; opacity: 0.12 !important; } /* Adjusted from 0.08 for better visibility on dark */

    @page {
      size: A4;
      margin: 0;
    }
    html, body {
        height: auto !important;
        background-color: hsl(var(--background)) !important;
        color: hsl(var(--foreground)) !important;
        font-family: 'Georgia', serif;
        font-size: 10pt;
        line-height: 1.3;
        width: 210mm !important;
        overflow: visible !important;
    }
    .no-print { display: none !important; }
    .printable-brochure {
        margin: 0 !important;
        padding: 0 !important;
        box-shadow: none !important;
        border: none !important;
        width: 100% !important;
        overflow: visible !important;
    }
     a { color: inherit !important; text-decoration: none !important; }
     a[href]::after { content: none !important; }

     * {
        transform: none !important;
        filter: none !important;
        visibility: visible !important;
    }
    .cover-image { opacity: 0.5 !important; }
    .developer-image { opacity: 0.7 !important; }
    .back-cover-image { opacity: 0.25 !important; }

    /* Ensure list bullets on accent backgrounds print correctly */
    .page-accent-bg li::before { color: hsl(var(--primary-foreground)) !important; }
    .page-accent-bg h1, .page-accent-bg h2, .page-accent-bg h3, .page-accent-bg h4, .page-accent-bg p { color: hsl(var(--primary-foreground)) !important; }
    .page-accent-bg .section-title { color: hsl(var(--primary-foreground)) !important; }
    .page-accent-bg .section-title::after { background-color: hsl(var(--primary-foreground)) !important; }

}