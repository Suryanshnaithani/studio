/* Styles specifically for the BrochurePreview component */
.brochure-preview-container {
  @apply bg-gray-200 p-4 md:p-8 print:p-0 print:bg-transparent overflow-y-auto;
  max-height: 100vh; /* Ensure preview area is scrollable */
}

.printable-brochure {
  @apply bg-white shadow-lg mx-auto print:shadow-none;
  background-color: hsl(var(--background)); /* Use theme background */
  width: 210mm; /* A4 width */
  padding: 0 !important;
  margin: 0 auto !important; /* Center in preview */
}

.page {
  @apply relative overflow-hidden; /* Default page background, can be overridden */
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
  width: 210mm;
  min-height: 297mm; /* A4 standard height */
  height: 297mm; /* Enforce A4 page height */
  font-family: var(--brochure-font-family, 'Georgia', serif); /* Use theme font */
  line-height: 1.4;
  box-shadow: 0 0 10px hsla(var(--foreground-h, 0), var(--foreground-s, 0%), var(--foreground-l, 10%), 0.1); /* Shadow for non-print */
  margin-bottom: 20px; /* Space between pages in preview */
  page-break-inside: avoid !important; /* Try to keep page content together */
  display: flex;
  flex-direction: column;
  box-sizing: border-box;
}

@media print {
  html, body { /* Apply to html and body for print context */
    width: 210mm !important;
    height: 297mm !important; /* Helps define viewport for printing */
    margin: 0 !important;
    padding: 0 !important;
    background-color: transparent !important; /* Ensure no body background interferes */
  }
  .brochure-preview-container { /* Ensure preview container takes no space */
    padding: 0 !important;
    margin: 0 !important;
    overflow: visible !important;
    height: auto !important;
  }
  .printable-brochure { /* The root of printed content */
    width: 210mm !important;
    height: auto !important; /* Height is managed by page elements */
    margin: 0 !important;
    padding: 0 !important;
    box-shadow: none !important;
  }
  .page {
    box-shadow: none !important;
    margin: 0 !important;
    padding: 0 !important;
    width: 210mm !important;
    height: 297mm !important; /* Strict A4 height for print */
    min-height: 297mm !important;
    overflow: hidden !important; /* Prevent overflow in print */
    page-break-inside: avoid !important; /* This should already be there */
    page-break-before: auto !important; /* Allow breaking before if needed */
    position: relative !important; /* Ensure consistent positioning */
    display: flex !important; /* Consistent display */
    flex-direction: column !important; /* Consistent direction */
    print-color-adjust: exact !important;
    -webkit-print-color-adjust: exact !important;
  }
   .page:not(:last-child) {
       page-break-after: always !important; /* Critical for page separation */
   }
}

.page-content {
  @apply relative flex-grow; /* Allow content to take available space */
  padding: 12mm 15mm;
  box-sizing: border-box;
  overflow: hidden !important; /* Prevent content from overflowing page for screen, print is handled by .page */
  display: flex;
  flex-direction: column;
}

/* Base Backgrounds using Theme Variables */
.page-light-bg { background-color: hsl(var(--background)); color: hsl(var(--foreground)); }
.page-accent-bg { background-color: hsl(var(--primary)); color: hsl(var(--primary-foreground)); }

/* Typography - Reduced margins/sizes for print fit */
h1 { font-size: 30px; line-height: 1.1; margin-bottom: 7mm; font-weight: bold; letter-spacing: -0.25pt; } /* Slightly smaller */
h2 { font-size: 22px; line-height: 1.1; margin-bottom: 5mm; font-weight: bold; letter-spacing: -0.1pt; } /* Slightly smaller */
h3 { font-size: 17px; line-height: 1.1; margin-bottom: 3.5mm; font-weight: bold; } /* Slightly smaller */
h4 { font-size: 14px; line-height: 1.1; margin-bottom: 2mm; font-weight: bold; } /* Slightly smaller */
p { font-size: 11px; line-height: 1.4; margin-bottom: 2mm; } /* Slightly smaller */
ul { list-style: none; padding-left: 0; margin-bottom: 3.5mm; }
li { margin-bottom: 1.5mm; font-size: 11px; position: relative; padding-left: 5.5mm; break-inside: avoid; } /* Slightly smaller */
li::before { content: '•'; color: hsl(var(--primary)); position: absolute; left: 0; top: 0.05em; font-size: 13px; line-height: 1; } /* Slightly smaller */

.page-accent-bg li::before { color: hsl(var(--primary-foreground)); }
.page-accent-bg h1, .page-accent-bg h2, .page-accent-bg h3, .page-accent-bg h4, .page-accent-bg p { color: hsl(var(--primary-foreground)); }

/* Section Title using Theme Variables */
.section-title {
    font-size: 24px; /* Slightly smaller */
    font-weight: bold;
    margin-bottom: 7mm;
    color: hsl(var(--primary));
    text-align: center;
    position: relative;
    padding-bottom: 2.5mm;
    page-break-after: avoid !important;
    flex-shrink: 0; /* Prevent shrinking */
}
.section-title::after {
    content: ""; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);
    width: 20mm; height: 1mm; background-color: hsl(var(--primary));
}
.page-accent-bg .section-title { color: hsl(var(--primary-foreground)); }
.page-accent-bg .section-title::after { background-color: hsl(var(--primary-foreground)); }

/* Cover Page Specific using Theme Variables */
.cover-page { background-color: hsl(var(--primary)); color: hsl(var(--primary-foreground)); text-align: center; display: flex; flex-direction: column; justify-content: center; align-items: center; }
.cover-image-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0.5; z-index: 1; overflow: hidden;}
.cover-image-container img { width: 100%; height: 100%; object-fit: cover; }
.cover-content { position: relative; z-index: 2; padding: 15mm; margin-top: -35mm; flex-grow:1; display: flex; flex-direction: column; justify-content: center; align-items: center; } /* Adjusted margin */
.project-logo { width: 60mm; max-height: 30mm; object-fit: contain; margin: 0 auto 10mm; display: block; }  /* max-height and object-fit */
.project-name { font-size: 36px; text-transform: uppercase; margin-bottom: 6mm; } /* Adjusted size */
.project-tagline { font-size: 17px; font-style: italic; margin-bottom: 10mm; } /* Adjusted size */
.rera-text {
  position: absolute;
  top: 10mm;
  right: 10mm;
  font-size: 8px;
  text-align: right;
  background-color: hsla(var(--foreground-h, 0), var(--foreground-s, 0%), var(--foreground-l, 10%), 0.35);
  color: hsl(var(--primary-foreground));
  padding: 1.5mm 2.5mm;
  border-radius: 1.5mm;
  z-index: 3;
}
.rera-text p { margin-bottom: 0; line-height: 1.1; }

/* Intro Page */
.intro-text { max-width: 140mm; margin: 0 auto; text-align: center; font-size: 12px; line-height: 1.5; flex-grow: 1; display: flex; flex-direction: column; justify-content: center; } /* Adjusted size & centering */
.watermark { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 50mm; opacity: 0.07; z-index: 0; print-opacity: 0.04; }
.page-accent-bg .watermark { filter: brightness(0) invert(1); opacity: 0.1; print-opacity: 0.07; }

/* Developer Page */
.developer-page { position: relative; }
.developer-image-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; opacity: 0.65; z-index: 1; overflow: hidden;}
.developer-image-container img { width: 100%; height: 100%; object-fit: cover; }
.developer-content { position: relative; z-index: 2; max-width: 100mm; background-color: hsla(var(--foreground-h, 0), var(--foreground-s, 0%), var(--foreground-l, 10%), 0.7); padding: 6mm; color: hsl(var(--primary-foreground)); border-radius: 1.5mm; margin: auto; } /* Centered with margin auto */
.developer-content h2 { margin-bottom: 3mm; font-size: 18px; }
.developer-content p { margin-bottom: 2mm; font-size: 11px; }
.developer-logo { width: 40mm; max-height: 20mm; object-fit:contain; margin: 6mm auto 0; display: block; } /* max-height and object-fit */
.disclaimer { position: absolute; bottom: 10mm; right: 10mm; font-size: 8px; color: hsl(var(--primary-foreground)); background-color: hsla(var(--foreground-h, 0), var(--foreground-s, 0%), var(--foreground-l, 10%), 0.55); padding: 1mm 2mm; border-radius: 1mm; z-index: 3; max-width: 70mm; text-align: right; }
.disclaimer p { margin-bottom: 0; }

/* Location Page */
.location-container { display: flex; flex-direction: column; gap: 5mm; flex-grow: 1; }
.location-text h3 { margin-top: 5mm; margin-bottom: 3mm; font-size: 16px; color: hsl(var(--primary));}
.location-map { position: relative; min-height: 70mm; margin-top: 5mm; overflow: hidden;}
.location-map img { width: 100%; height: auto; max-height: 90mm; object-fit: contain; border-radius: 1.5mm; border: 1px solid hsl(var(--border)); }
.map-disclaimer { position: absolute; bottom: 2mm; right: 2mm; font-size: 7px; color: hsl(var(--primary-foreground)); background-color: hsla(var(--foreground-h, 0), var(--foreground-s, 0%), var(--foreground-l, 10%), 0.55); padding: 1mm 1.5mm; border-radius: 1mm; z-index: 3; }
.map-disclaimer p { margin-bottom: 0; }
.list-columns { column-count: 2; column-gap: 6mm; margin: 5mm 0; }
.list-columns ul { margin-bottom: 4mm; }
.location-note { font-size: 8px; font-style: italic; margin-top: auto; padding-top: 3mm; text-align: center; color: hsl(var(--muted-foreground)); flex-shrink:0;} /* Push to bottom */

/* Connectivity Page */
.connectivity-container { display: flex; flex-direction: column; gap: 5mm; flex-grow: 1; }
.connectivity-text h3 { margin-bottom: 3mm; margin-top: 0; font-size: 16px; color: hsl(var(--primary));}
.connectivity-image { position: relative; min-height: 70mm; margin-top: 5mm; overflow: hidden;}
.connectivity-image img { width: 100%; height: auto; max-height: 90mm; object-fit: cover; border-radius: 1.5mm; }
.district-label { position: absolute; bottom: 6mm; left: 50%; transform: translateX(-50%); background-color: hsl(var(--background)); color: hsl(var(--primary)); padding: 1.5mm 4mm; font-weight: bold; font-size: 12px; text-transform: uppercase; border-radius: 1mm; z-index: 3; }
.connectivity-point-list { break-inside: avoid; margin-bottom: 3.5mm; }
.connectivity-point-list h4 { margin-bottom: 1.5mm; font-size: 14px; color: hsl(var(--foreground));}
.connectivity-point-list ul { margin: 0; }
.connectivity-point-list li::before { content: '•'; color: hsl(var(--primary)); position: absolute; left: 0; top: 0.05em; font-size: 13px; line-height: 1; }

/* Amenities Intro Page */
.amenities-intro { max-width: 140mm; margin: 0 auto; text-align: center; font-size: 12px; line-height: 1.5; flex-grow: 1; display: flex; flex-direction: column; justify-content: center; } /* Adjusted size & centering */

/* Amenities List Page */
.amenities-container { display: flex; flex-direction: column; gap: 5mm; flex-grow: 1; }
.amenities-image { position: relative; min-height: 70mm; margin-top: 5mm; overflow: hidden;}
.amenities-image img { width: 100%; height: auto; max-height: 80mm; object-fit: cover; border-radius: 1.5mm; }
.amenities-image .map-disclaimer { position: absolute; bottom: 2mm; right: 2mm; font-size: 7px; color: hsl(var(--primary-foreground)); background-color: hsla(var(--foreground-h, 0), var(--foreground-s, 0%), var(--foreground-l, 10%), 0.55); padding: 1mm 1.5mm; border-radius: 1mm; z-index: 3; }
.amenities-list h3 { color: hsl(var(--primary)); border-bottom: 1px solid hsl(var(--border)); padding-bottom: 1.5mm; margin-top: 5mm; margin-bottom: 3mm; font-size: 16px; }
.amenities-list ul { column-count: 2; column-gap: 6mm; }

/* Amenities Grid Page */
.amenities-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 6mm; margin-bottom: 6mm; margin-top: 6mm; }
.grid-item { position: relative; border-radius: 1.5mm; overflow: hidden; aspect-ratio: 4 / 3; }
.grid-item img { width: 100%; height: 100%; object-fit: cover; }
.grid-label { position: absolute; bottom: 3mm; left: 50%; transform: translateX(-50%); background-color: hsla(var(--background-h, 0), var(--background-s, 0%), var(--background-l, 98%), 0.9); color: hsl(var(--primary)); padding: 1mm 3mm; font-weight: bold; font-size: 11px; text-transform: uppercase; border-radius: 1mm; z-index: 3; }
.grid-disclaimer { font-size: 8px; font-style: italic; text-align: center; margin-top: auto; padding-top:5mm; color: hsl(var(--muted-foreground)); flex-shrink: 0;} /* Push to bottom */

/* Specifications Page */
.specs-container { display: flex; flex-direction: column; gap: 5mm; flex-grow: 1; }
.specs-image { position: relative; min-height: 70mm; margin-top: 5mm; overflow: hidden;}
.specs-image img { width: 100%; height: auto; max-height: 80mm; object-fit: cover; border-radius: 1.5mm; }
.specs-image .map-disclaimer { position: absolute; bottom: 2mm; right: 2mm; font-size: 7px; color: hsl(var(--primary-foreground)); background-color: hsla(var(--foreground-h, 0), var(--foreground-s, 0%), var(--foreground-l, 10%), 0.55); padding: 1mm 1.5mm; border-radius: 1mm; z-index: 3; }
.specs-list h3 { color: hsl(var(--primary)); border-bottom: 1px solid hsl(var(--border)); padding-bottom: 1.5mm; margin-bottom: 3mm; margin-top: 5mm; font-size: 16px; }
.specs-list ul { column-count: 2; column-gap: 6mm; }

/* Master Plan Page */
.master-plan-image { width: 100%; margin-bottom: 5mm; position: relative; margin-top: 5mm; overflow: hidden;}
.master-plan-image img { width: 100%; height: auto; object-fit: contain; border-radius: 1.5mm; border: 1px solid hsl(var(--border)); max-height: 140mm; }
.master-plan-image .map-disclaimer { position: absolute; bottom: 2mm; right: 2mm; font-size: 7px; color: hsl(var(--foreground)); background-color: hsla(var(--background-h, 0), var(--background-s, 0%), var(--background-l, 98%), 0.75); padding: 1mm 1.5mm; border-radius: 1mm; z-index: 3; }
.master-plan-text { margin-bottom: 5mm; font-size: 11px; }

/* Floor Plans Page */
.floor-plans-container { display: flex; flex-direction: column; gap: 7mm; margin-top: 5mm; flex-grow: 1; }
.floor-plan { display: flex; flex-direction: row; gap: 6mm; page-break-inside: avoid !important; align-items: flex-start; }
.plan-image { flex: 0 0 70mm; position: relative; max-height: 80mm; overflow: hidden;}
.plan-image img { width: 100%; height: auto; object-fit: contain; border: 1px solid hsl(var(--border)); border-radius: 1.5mm; max-height: 80mm; }
.plan-details { flex: 1; }
.plan-details h4 { color: hsl(var(--primary)); margin-bottom: 2mm; margin-top: 0; font-size: 14px; }
.plan-details p { margin-bottom: 1.5mm; font-size: 11px; }
.plan-details ul { margin-top: 2mm; }
.plan-details li { margin-bottom: 1mm; font-size: 10.5px; padding-left: 5mm; }
.plan-details li::before { content: '•'; color: hsl(var(--primary)); position: absolute; left: 0; top: 0.05em; font-size: 12.5px; line-height: 1; }
.plans-disclaimer { font-size: 8px; font-style: italic; margin-top: auto; padding-top:5mm; text-align: center; color: hsl(var(--muted-foreground)); flex-shrink: 0;} /* Push to bottom */

/* Back Cover */
.back-cover { background-color: hsl(var(--primary)); color: hsl(var(--primary-foreground)); text-align: center; display: flex; flex-direction: column; justify-content: space-between; align-items: center; }
.back-cover-image-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0.4; z-index: 1; overflow: hidden;}
.back-cover-image-container img { width: 100%; height: 100%; object-fit: cover; }
.back-cover-content { position: relative; z-index: 2; padding-top: 25mm; flex-grow: 1; width: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; } /* Centering content */
.back-logo { width: 70mm; max-height: 35mm; object-fit: contain; margin: 0 auto 10mm; display: block; } /* max-height and object-fit */
.call-to-action { font-size: 22px; text-transform: uppercase; margin-bottom: 10mm; letter-spacing: 0.5pt; }
.contact-info { margin-bottom: 10mm; }
.contact-info h3 { display: inline-block; border-bottom: 1px solid hsla(var(--primary-foreground-h, 0), var(--primary-foreground-s, 0%), var(--primary-foreground-l, 98%), 0.35); padding-bottom: 1.5mm; margin-bottom: 6mm; font-size: 17px; }
.contact-info p { margin-bottom: 2mm; font-size: 11px; }
.contact-info a { color: hsl(var(--primary-foreground)); text-decoration: underline; }
.full-disclaimer { position: relative; z-index: 2; bottom: auto; left: auto; right: auto; margin: 0 10mm 10mm; font-size: 8px; text-align: justify; background-color: hsla(var(--foreground-h, 0), var(--foreground-s, 0%), var(--foreground-l, 10%), 0.3); color: hsl(var(--primary-foreground)); padding: 3mm; border-radius: 1.5mm; flex-shrink: 0; } /* flex-shrink to prevent it from being pushed out */
.full-disclaimer p { margin-bottom: 0.7mm; line-height: 1.2; }

/* General Helpers */
img { display: block; max-width: 100%; height: auto; page-break-inside: avoid !important; }
.object-cover { object-fit: cover; }
.object-contain { object-fit: contain; }

li::before {
  line-height: 1; top: 0.1em;
}

h1, h2, h3, h4, h5, h6, .section-title {
  page-break-after: avoid !important;
}
p, ul, ol, div:not(.page):not(.page-content):not(.page-content > div), img, figure, table, thead, tbody {
    page-break-inside: avoid !important;
}
p, li { orphans: 3; widows: 3; }
ul, ol { page-break-before: auto; page-break-after: auto; }

img[data-ai-hint] { }

/* Force print colors using theme variables */
@media print {
  *, *::before, *::after {
      print-color-adjust: exact !important;
      -webkit-print-color-adjust: exact !important;
       box-shadow: none !important;
       text-shadow: none !important;
  }
  .page-accent-bg, .cover-page, .back-cover {
    background-color: hsl(var(--primary)) !important;
    color: hsl(var(--primary-foreground)) !important;
  }
  .page-light-bg {
    background-color: hsl(var(--background)) !important;
    color: hsl(var(--foreground)) !important;
  }
   .developer-content {
      background-color: hsla(var(--foreground-h, 0), var(--foreground-s, 0%), var(--foreground-l, 10%), 0.7) !important;
      color: hsl(var(--primary-foreground)) !important;
   }
  .disclaimer, .map-disclaimer, .amenities-image .map-disclaimer, .specs-image .map-disclaimer, .master-plan-image .map-disclaimer {
      background-color: hsla(var(--foreground-h, 0), var(--foreground-s, 0%), var(--foreground-l, 10%), 0.55) !important;
      color: hsl(var(--primary-foreground)) !important;
  }
   .master-plan-image .map-disclaimer {
      background-color: hsla(var(--background-h, 0), var(--background-s, 0%), var(--background-l, 98%), 0.75) !important;
      color: hsl(var(--foreground)) !important;
  }
  .back-cover .full-disclaimer {
      background-color: hsla(var(--foreground-h, 0), var(--foreground-s, 0%), var(--foreground-l, 10%), 0.3) !important;
      color: hsl(var(--primary-foreground)) !important;
  }
   .district-label {
       background-color: hsl(var(--background)) !important;
       color: hsl(var(--primary)) !important;
   }
   .grid-label {
       background-color: hsla(var(--background-h, 0), var(--background-s, 0%), var(--background-l, 98%), 0.9) !important;
       color: hsl(var(--primary)) !important;
   }
    .rera-text {
        background-color: hsla(var(--foreground-h, 0), var(--foreground-s, 0%), var(--foreground-l, 10%), 0.35) !important;
        color: hsl(var(--primary-foreground)) !important;
    }

    .watermark { opacity: 0.04 !important; }
    .page-accent-bg .watermark { filter: brightness(0) invert(1) !important; opacity: 0.07 !important; }

    @page {
      size: A4;
      margin: 0 !important; /* Crucial for no extra margins */
    }
    html, body {
        font-family: var(--brochure-font-family, 'Georgia', serif) !important;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }
    .no-print { display: none !important; }

     a { color: inherit !important; text-decoration: none !important; }
     a[href]::after { content: none !important; }

    .cover-image-container { opacity: 0.5 !important; } /* Opacity adjusted for print */
    .developer-image-container { opacity: 0.65 !important; } /* Opacity adjusted for print */
    .back-cover-image-container { opacity: 0.4 !important; } /* Opacity adjusted for print */

    .page-accent-bg li::before { color: hsl(var(--primary-foreground)) !important; }
    .page-accent-bg h1, .page-accent-bg h2, .page-accent-bg h3, .page-accent-bg h4, .page-accent-bg p { color: hsl(var(--primary-foreground)) !important; }
    .page-accent-bg .section-title { color: hsl(var(--primary-foreground)) !important; }
    .page-accent-bg .section-title::after { background-color: hsl(var(--primary-foreground)) !important; }
}